NSC slurmd utilities
====================

This is a collection of [slurmd] command wrappers and job handling scripts, almost [bash] native, I have been using at the Swedish National Supercomputer Centre at LinkÃ¶ping University ([NSC]).

They are posted here just for the sake of sharing with undergraduate students in our laboratory, but since it is a national centre, and slurm is kind of international, theres no reason not to make it available to everyone.

A [GNU GPLv3] license is included in `LICENSE.md`, as it is common sense.

Description
-----------

`nsc_account_check.sh` Checks your accounts and priority
> Uses the beowulf file and some slurm commands

`nsc_account_get.sh` Gets your account with highest priority

`nsc_cancel_all.sh` Cancel all running and queued jobs
> This is good for those derp moments

`nsc_cancel_queue.sh` Cancels all queued, non-running jobs
> Derp moment, but less than `nsc_cancel_all.sh`

`nsc_check_finished.sh` Reports what jobs have not finished and why
> Does not report launched jobs still running or pending.

`nsc_check_occupied.sh` Count number of occupied nodes on the cluster
> For fun.

`nsc_check_prio.sh` Check what queue position your jobs have
> Shows the line-number in the queue that your first job has, counted from the top.

`nsc_check_start.sh` Short for listing estimated start time

`nsc_jobs_ass_notarget.sh` Assigns jobs with the job itself as target file
> Target files are "waiting for" files for the handler; so if you specify a target file, that does not exist, then the handler won't run the script. Useful when you have no target files for some reason.

`nsc_jobs_ass.sh` Assigns jobs
> To be used in a for loop; creates a job script wrapper around a duty-script that you specify. Handled by job handlers generated by `nsc_launch_create_handler.sh` or ran standalone.

`nsc_jobs_fatten.sh` Sed's in the fatten option into job files
> Requests slurm to supply a fat node for the specified jobs when launched

`nsc_launch_create_handler.sh` Creates job handlers
> This is a simple bash implementation of a job handler that iterates over a number of job scripts in the current directory. Can be ran alongside a number of other job handlers to spread the work over the cluster.

`nsc_launch_devel.sh` Launches jobs into devel partition
> Same as launch jobs, but for development partition

`nsc_launch_handler.sh` Launches specified job handlers

`nsc_launch_jobs.sh` Launches job Launches all specified job-files to slurm.
> Checks if jobs are already running, so that you don't double-submit.

`nsc_update_jobs.sh` Updates queue to project with highest priority
> If you have access to multiple accounts, this script will ensure that your queue have the highest possible priority at all times, with respect to what account the jobs are assigned to. Add this to your crontab.

`nsc_wjobs.sh` Watch-wrapper showing your queue and quota
> Just a compilation of metrics on your queue and quota; for the control freak.

[slurmd]: https://slurm.schedmd.com/
[bash]: https://www.gnu.org/software/bash/
[NSC]: https://www.nsc.liu.se/
[GNU GPLv3]: https://www.gnu.org/licenses/gpl.html
